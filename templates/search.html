{% extends "base.html" %}
{% block content %}

    <!-- START: main contents -->
    <div id="fh5co-project">
      <div class="container">

	<!-- START: Check Error Query Genes -->
	{% if num_list_query_gene_error == 1 %}
	<script>
	  alert("The gene name provided, " + "[ {{ str_list_query_gene_error }} ]" + ", is not associated with a disease in our database.")
	</script>
        {% endif %}
	{% if num_list_query_gene_error > 1 %}
	<script>
	  alert("The gene names provided, " + "[ {{ str_list_query_gene_error }} ]" + ", are not associated with a disease in our database.")
	</script>
        {% endif %}
	<!-- END: Check Error Query Genes -->

	<!-- START: FORM -->
	<form name="search" action="/search_disease" method="post" class="form-group" enctype="multipart/form-data">
	  <!-- START: Query Phenotype(s) -->
	  <table>
	    <tr>
	      <td nowrap>
                <h2>{{ _('index_textbox_title') }}</h2>
	      </td>
	      <td nowrap>
		<!-- 参考：http://proengineer.internous.co.jp/content/columnfeature/7605 -->
		<!-- 参考：https://www.marineroad.com/staff-blog/14026.html -->
		<label for="file_hpo_list">
		  <span style="cursor:pointer;"><font color="#0431B4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ _('search_label_upload_hpo')}} : </font></span>
		  <input type="file" id="file_hpo_list" name="file_hpo_list" style="display:none;" onchange="$('#filename_hpo_list').val($(this).prop('files')[0].name)">
		</label>
		<input type="text" id="filename_hpo_list" name="filename_hpo_list" size="40" style=border:none; readonly onClick="$('#file').click();">
	      </td>
	    </tr>
	  </table>
	  <textarea class="form-control" rows="1" id="tokeninput_hpo" name="str_phenotypes"></textarea>
	  <!-- END: Query Phenotype(s) -->
	  <br>
	  <!-- START: Narrow down the diseases by Gene(s) -->
	  <table>
	    <tr>
	      <td nowrap>
		<h2>{{ _('search_textbox_title_narrowdown') }}</h2>
	      </td>
	      <td nowrap>
		<!-- 参考：http://proengineer.internous.co.jp/content/columnfeature/7605 -->
		<!-- 参考：https://www.marineroad.com/staff-blog/14026.html -->
		<label for="file_gene_list">
		  <!-- <span style="cursor:pointer;"><font color="#F73859">+ Upload File (Entrez Gene ID List) : </font></span> -->
		  <span style="cursor:pointer;"><font color="#0431B4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ _('search_label_upload_gene')}} : </font></span>
		  <input type="file" id="file_gene_list" name="file_gene_list" style="display:none;" onchange="$('#filename_gene_list').val($(this).prop('files')[0].name)">
		</label>
		<input type="text" id="filename_gene_list" name="filename_gene_list" size="50" style=border:none; readonly onClick="$('#file').click();">
	      </td>
	    </tr>
	  </table>
	  <textarea class="form-control" rows="1" id="tokeninput_genes" name="str_genes"></textarea>
	  <!-- END: Narrow down the diseases by Gene(s) -->
	  <br>
	  <table width="100%">
	    <tr>
	      <td>
		<!-- input type="button" class="btn btn-info" value="{{ _('search_button_download_summary') }}" onClick='location.href="{{ url_for_download_summary(str_phenotypes, str_genes, '1', '10') }}"' -->
		<!-- input type="button" class="btn btn-info" value="PhenoTipsに結果を登録" onClick="window.open('https://demo.gene42.com/bin/PhenoTips/OpenPatientRecord?eid={{ str_eid }}&mode=edit&create=true&phenotype={{ str_phenotypes_phenotips }}')" -->

		<!-- 共有のためのモーダルを表示用ボタン -->
		<button type="button" class="btn btn-info" data-toggle="modal" data-target=".modal-share">{{ _('search_button_share_download') }}</button>

		<!-- START: 共有のためのモーダル・ダイアログ -->
		<div class="modal fade modal-share" tabindex="-1" role="dialog" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"><span>×</span></button>
			<h3 class="modal-title">{{ _('search_share_modal_title') }}</h3>
		      </div>
		      <!-- START: Share -->

		      <div class="modal-body">
			<table width="100%">
			  <tr><td bgcolor="#223a70">
			      <h4 class="modal-title"><font color="white"><b>&nbsp;&nbsp;{{ _('search_share_modal_label_share') }}</b></font></h4>
			  </td></tr>
			  <tr>
			    <td>
			      <br>&nbsp;&nbsp;{{ _('search_share_modal_label_link') }}: <br>
			      &nbsp;&nbsp;<input style="width:500px;" type="text" id="share_link" value="https://pubcasefinder.dbcls.jp/search_disease/phenotype:{{ str_phenotypes }}/gene:{{ str_genes}}/page:1,1/size:10,10,omim" readonly>
			    </td>
			  </tr>
			  <tr><td>&nbsp;</td></tr>
			  <tr>
			    <!-- buttonでsubmitさせない https://qiita.com/kazu56/items/b2e9c15942e04a6ffda9  -->
			    <td align="left" valign="bottom">
			      &nbsp;&nbsp;<button type="button" class="btn btn-info" onclick="copyToClipboard()">{{ _('search_share_modal_button_copy') }}</button>
			      <button type="button" class="btn btn-info" onclick="location.href='mailto:?body=https://pubcasefinder.dbcls.jp/search_disease/phenotype:{{ str_phenotypes }}/gene:{{ str_genes}}/page:1,1/size:10,10,omim'">{{ _('search_share_modal_button_mail') }}</button>
			    </td>
			  </tr>
			</table>
		      </div>
		      <br>
		      <!-- END: Share -->
		      <!-- END: Download -->
		      <div class="modal-body">
			<table width="100%">
			  <tr><td bgcolor="#223a70">
			      <h4 class="modal-title"><font color="white"><b>&nbsp;&nbsp;{{ _('search_share_modal_label_download') }}</b></font></h4>
			  </td></tr>
			  <tr>
			    <td>
			      <br>&nbsp;&nbsp;{{ _('search_button_download_summary') }}:
			      &nbsp;&nbsp;<input type="button" class="btn btn-info" value="TEXT format" onClick='location.href="{{ url_for_download_summary(str_phenotypes, str_genes, '1', '10') }}"'>
			    </td>
			  </tr>
			  <tr><td>&nbsp;</td></tr>
			  <tr>
			    <td>
			      &nbsp;&nbsp;{{ _('search_button_download_OMIM') }}:
			      &nbsp;&nbsp;<input type="button" class="btn btn-info" value="TEXT format" onClick='location.href="{{ url_for_download_results_search_omim_page(str_phenotypes, str_genes, '1', '10') }}"'>
			    </td>
			  </tr>
			  <tr><td>&nbsp;</td></tr>
			  <tr>
			    <td>
			      &nbsp;&nbsp;{{ _('search_button_download_Orphanet') }}:
			      &nbsp;&nbsp;<input type="button" class="btn btn-info" value="TEXT format" onClick='location.href="{{ url_for_download_results_search_page(str_phenotypes, str_genes, '1', '10') }}"'>
			    </td>
			  </tr>
			</table>
		      </div>
		      <!-- END: Download -->
		      <div class="modal-footer">
			<button type="button" class="btn btn-default" data-dismiss="modal">{{ _('search_share_modal_button_close') }}</button>
		      </div>
		    </div>
		  </div>
		</div>
		<!-- END: 共有のためのモーダル・ダイアログ -->
	      </td>
	      <td align="right">
		<button id="phenotouch" class="btn btn-default">{{ _('index_button_phenotouch') }}</button>
		<button id="tokeninput_hpo_genes_clear" class="btn btn-default">{{ _('index_button_clear') }}</button>
		<button type="submit" class="btn btn-primary">{{ _('index_button_search') }}</button>
	      </td>
	    </tr>
	  </table>
	  <br>
	  <br>





      <!-- START: Nav-tabs -->
      <div class="panel with-nav-tabs panel-default">
        <div class="panel-heading">
          <ul class="nav nav-tabs">
	    {% if active_tab == "orphanet" %}
            <li><a href="#tab2default" data-toggle="tab"><div width="100" align="center">{{ _('search_tab_OMIM') }}&nbsp;&nbsp;{{ '{:,.0f}'.format(total_hit_omim) }} {{ _('search_label_disease') }}</div></a></li>
            <li class="active"><a href="#tab1default" data-toggle="tab"><div width="100" align="center">{{ _('search_tab_Orphanet') }}&nbsp;&nbsp;{{ '{:,.0f}'.format(total_hit) }} {{ _('search_label_disease') }}</div></a></li>
	    {% else %}
            <li class="active"><a href="#tab2default" data-toggle="tab"><div width="100" align="center">{{ _('search_tab_OMIM') }}&nbsp;&nbsp;{{ '{:,.0f}'.format(total_hit_omim) }} {{ _('search_label_disease') }}</div></a></li>
            <li><a href="#tab1default" data-toggle="tab"><div width="100" align="center">{{ _('search_tab_Orphanet') }}&nbsp;&nbsp;{{ '{:,.0f}'.format(total_hit) }} {{ _('search_label_disease') }}</div></a></li>
	    {% endif %}
          </ul>
        </div>

        <div class="panel-body">
          <div class="tab-content">


        <!-- Start: Orphanet tab -->
	{% if active_tab == "orphanet" %}
        <div class="tab-pane fade in active" id="tab1default">
	{% else %}
        <div class="tab-pane fade" id="tab1default">
	{% endif %}


	  <div clas="row">
	    <div class="col-sm-12">
	      <table width="100%" height="60">
		<tr>
		  <td align="left" valign="top" width="230">
		    <p><br></p>
		    <p>{{ _('search_label_total') }}: <font size="4" color="black"><b>{{ '{:,.0f}'.format(total_hit) }}</b></font> {{ _('search_label_disease') }}</p>
		  </td>
	      <!-- END: Show total number -->

	      <!-- START: Pagination upper_part -->
	      <td align="middle" valign="middle">
		<ul class="pagination">
		  {% if pagination.has_prev %}
		    <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, (pagination.page - 1) ~ ',' ~ pagination_omim.page, cs ~ ',' ~ cs_omim ~ ',' ~ 'orphanet') }}">&laquo;</a></li>
		  {% endif %}
		  {%- for page in pagination.iter_pages() %}
		    {% if page %}
		      {% if page != pagination.page %}
		        <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, page ~ ',' ~ pagination_omim.page, cs ~ ',' ~ cs_omim ~ ',' ~ 'orphanet') }}">{{ page }}</a></li>
		      {% else %}
		        <li align="center" class="active"><a href="#">{{ page }}</a></li>
		      {% endif %}
		    {% else %}
		      <li align="center"><span style="border : 0px">…</span></l>
                    {% endif %}
		  {%- endfor %}
                  {% if pagination.has_next %}
                    <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, (pagination.page + 1) ~ ',' ~ pagination_omim.page, cs ~ ',' ~ cs_omim ~ ',' ~ 'orphanet') }}">&raquo;</a></li>
		  {% endif %}
                </ul>
	      </td>
              <!-- END: Pagination upper_part -->

	      <!-- START: Show selector for "per page" -->
	      <input type="hidden" name="page_orphanet" value="{{ pagination.page }}">
	      <input type="hidden" name="changesize_selector_orphanet" value="{{ cs }}">
              <td align="right" valign="top" width="200">
		<p><br></p>
		<!-- http://qiita.com/act823/items/3a203f1f96e7fe52f69d -->
		<select id="changesize_selector_orphanet_link" name="changesize_selector_orphanet_link" onchange="changesize_orphanet()">
		  {% if cs == "10" %}
		    <option id="selector_10" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '10,' ~ cs_omim ~ ',orphanet') }}" selected>10</option>
		    <option id="selector_20" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '20,' ~ cs_omim ~ ',orphanet') }}">20</option>
		    <option id="selector_40" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '40,' ~ cs_omim ~ ',orphanet') }}">40</option>
		    <option id="selector_60" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '60,' ~ cs_omim ~ ',orphanet') }}">60</option>
		    <option id="selector_100" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '100,' ~ cs_omim ~ ',orphanet') }}">100</option>
		  {% endif %}
		  {% if cs == "20" %}
		    <option id="selector_10" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '10,' ~ cs_omim ~ ',orphanet') }}">10</option>
		    <option id="selector_20" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '20,' ~ cs_omim ~ ',orphanet') }}" selected>20</option>
		    <option id="selector_40" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '40,' ~ cs_omim ~ ',orphanet') }}">40</option>
		    <option id="selector_60" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '60,' ~ cs_omim ~ ',orphanet') }}">60</option>
		    <option id="selector_100" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '100,' ~ cs_omim ~ ',orphanet') }}">100</option>
		  {% endif %}
		  {% if cs == "40" %}
		    <option id="selector_10" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '10,' ~ cs_omim ~ ',orphanet') }}">10</option>
		    <option id="selector_20" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '20,' ~ cs_omim ~ ',orphanet') }}">20</option>
		    <option id="selector_40" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '40,' ~ cs_omim ~ ',orphanet') }}" selected>40</option>
		    <option id="selector_60" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '60,' ~ cs_omim ~ ',orphanet') }}">60</option>
		    <option id="selector_100" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '100,' ~ cs_omim ~ ',orphanet') }}">100</option>
		  {% endif %}
		  {% if cs == "60" %}
		    <option id="selector_10" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '10,' ~ cs_omim ~ ',orphanet') }}">10</option>
		    <option id="selector_20" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '20,' ~ cs_omim ~ ',orphanet') }}">20</option>
		    <option id="selector_40" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '40,' ~ cs_omim ~ ',orphanet') }}">40</option>
		    <option id="selector_60" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '60,' ~ cs_omim ~ ',orphanet') }}" selected>60</option>
		    <option id="selector_100" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '100,' ~ cs_omim ~ ',orphanet') }}">100</option>
		  {% endif %}
		  {% if cs == "100" %}
		    <option id="selector_10" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '10,' ~ cs_omim ~ ',orphanet') }}">10</option>
		    <option id="selector_20" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '20,' ~ cs_omim ~ ',orphanet') }}">20</option>
		    <option id="selector_40" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '40,' ~ cs_omim ~ ',orphanet') }}">40</option>
		    <option id="selector_60" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '60,' ~ cs_omim ~ ',orphanet') }}">60</option>
		    <option id="selector_100" value="{{ url_for_search_page(str_phenotypes, str_genes, '1,' ~ pagination_omim.page, '100,' ~ cs_omim ~ ',orphanet') }}" selected>100</option>
		  {% endif %}
		</select>
		{{ _('search_label_perpage') }}
	      </td>
	      <!-- END: Show selector for "per page" -->
            </tr>
          </table>
	  <!-- START: Controller -->





	<!-- START: Show download button -->
	<!--
        <div align="right">
	  <input type="button" class="btn btn-info" value="{{ _('search_button_download') }}" onClick='location.href="{{ url_for_download_results_search_page(str_phenotypes, str_genes, '1', '10') }}"'>
	</div>
	-->
	<!-- END: Show download button -->


        <!-- START: Show result table -->
	<br>
	    <table class="table table-striped">
	      <thead>
		<tr>
		  <th style="width:100px;" class="text-left">{{ _('search_label_rank') }}<br>{{ _('search_label_similarity') }}</th>
		  <th style="width:200px;" class="text-left">{{ _('search_label_DiseaseName') }}</th>
		  <th>
		    <div align="right">
		      <span class="label label-primary"><font size="3"><b>{{ _('search_label_MatchedPhenotype') }}</b></font></span>&nbsp;
		      <span class="label label-default"><font size="3"><b>{{ _('search_label_CausativeGene') }}</b></font></span>&nbsp;
		      <span class="label label-success"><font size="3"><b>{{ _('search_label_Inheritance') }}</b></font></span><br>
		    </div>
		  </th>
		</tr>
	      </thead>
	      <tbody>
		<!-- http://tnakamura.hatenablog.com/entry/20110608/jinja2_for_loop_index -->
                {% for dict_similar_disease in list_dict_similar_disease %}

		  <tr>
		    <!-- Rank -->
		    <!-- Similarity -->
		    <td width="10">
		      <p style="margin-top:0.6em;margin-bottom:0.6em;">
			{{ dict_similar_disease['rank'] }}<br>({{ (dict_similar_disease['match_score']*100)|round(1) }}%)
		      </p>
		    </td>
		    <!-- Disease Name -->
		    <td>
		      <p style="margin-top:0.6em;margin-bottom:0.6em;">
			<a href="{{ url_for_disease_casereport_page(dict_similar_disease['onto_id_ordo'], str_phenotypes, '', '1', '10') }}" target="_blank">{{ dict_similar_disease['onto_term_ordo'] }}
		          {% if (get_locale() == "ja" or get_locale() == "ja_JP") and dict_similar_disease['onto_term_ordo_ja'] != "" %}
			    <br>----<br>{{ dict_similar_disease['onto_term_ordo_ja'] }}
		          {% endif %}
			</a>
		      </p>
		    </td>
		    <td>
		    <!-- Matched Phenotypes -->
		      <p style="margin-top:0.6em;margin-bottom:0.6em;">
		        <p style="margin-bottom:0.6em;">
			  {% set dict_prev_id = {} %}
			  {% for dict_onto_id_term_hp_disease in dict_similar_disease['onto_id_term_hp_disease'] %}
		            {% if not dict_onto_id_term_hp_disease['onto_id_hp_disease'] in dict_prev_id %}
		              <span class="label label-primary"><font size="3"><a target="_blank" style="color:white;" href="{{ url_for_show_phenotype_context_page( dict_similar_disease['onto_id_ordo'], dict_onto_id_term_hp_disease['onto_id_hp_disease'], '1', '20' ) }}">{{ dict_onto_id_term_hp_disease['onto_term_hp_disease'] }}</a></font></span>
			      {%- if dict_prev_id.update({dict_onto_id_term_hp_disease['onto_id_hp_disease']:True}) %}{%- endif %} 
		            {% endif %}
			  {% endfor %}
			</p>
		    <!-- Causative Genes -->
		      {% set prev_id = "" %}
		      {% for dict_orpha_number_symbol_synonym in dict_similar_disease['orpha_number_symbol_synonym'] %}
		        {% if prev_id != dict_orpha_number_symbol_synonym['entrez_id'] %}
		          <span class="btn-group">
			    <button class="label label-default" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			      <font size="3" color="white">{{ dict_orpha_number_symbol_synonym['symbol'] }}</font>
			    </button>
			    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
			      <a class="dropdown-item" href="https://www.ncbi.nlm.nih.gov/CBBresearch/Lu/Demo/PubTator/index.cgi?searchtype=Gene&Sort=&query={{ dict_orpha_number_symbol_synonym['symbol'] }}&Disease_display=1&Species_display=1&Mutation_display=1&Chemical_display=1&Gene_display=1" target="_blank"><font size="3" color="#0431B4"><u>PubTator</u></font></a><br>
			      <a class="dropdown-item" href="https://www.ncbi.nlm.nih.gov/clinvar/?term={{ dict_orpha_number_symbol_synonym['symbol'] }}%5Bgene%5D" target="_blank"><font size="3" color="#0431B4"><u>ClinVar</u></font></a><br>
			      <a class="dropdown-item" href="http://www.hgmd.cf.ac.uk/ac/gene.php?gene={{ dict_orpha_number_symbol_synonym['symbol'] }}" target="_blank"><font size="3" color="#0431B4"><u>HGMD</u></font></a>
			    </div>
		          </span>
		          <!--a href="https://www.ncbi.nlm.nih.gov/clinvar/?term={{ dict_orpha_number_symbol_synonym['symbol'] }}%5Bgene%5D" target="_blank"><span class="label label-default"><font size="3">{{ dict_orpha_number_symbol_synonym['symbol'] }}</font></span></a-->
		          {% set prev_id = dict_orpha_number_symbol_synonym['entrez_id'] %}
			{% endif %}
		      {% endfor %}
		  <!-- Disease Information -->
		      <!-- Inheritance -->
		      <p style="margin-top:0.6em;margin-bottom:0.6em;">
			<!-- HP:0000006|Autosomal dominant inheritance -->
			<!-- HP:0000007|Autosomal recessive inheritance -->
			<!-- HP:0001417|X-linked inheritance -->
			<!-- HP:0001419|X-linked recessive inheritance -->
			<!-- HP:0001423|X-linked dominant inheritance -->
			<!-- HP:0001425|Heterogeneous -->
			<!-- HP:0001426|Multifactorial inheritance -->
			<!-- HP:0001427|Mitochondrial inheritance -->
			<!-- HP:0001428|Somatic mutation -->
			<!-- HP:0001442|Somatic mosaicism -->
			<!-- HP:0001444|Autosomal dominant somatic cell mutation -->
			<!-- HP:0001450|Y-linked inheritance -->
			<!-- HP:0001452|Autosomal dominant contiguous gene syndrome -->
			<!-- HP:0001466|Contiguous gene syndrome -->
			<!-- HP:0001470|Sex-limited autosomal dominant -->
			<!-- HP:0001472|Familial predisposition -->
			<!-- HP:0001475|Male-limited autosomal dominant -->
			<!-- HP:0003743|Genetic anticipation -->
			<!-- HP:0003744|Genetic anticipation with paternal anticipation bias -->
			<!-- HP:0003745|Sporadic -->
			<!-- HP:0010982|Polygenic inheritance -->
			<!-- HP:0010984|Digenic inheritanec -->
			<!-- HP:0012275|Autosomal dominant inheritance with maternal imprinting -->
			<!-- HP:0025352|Autosomal dominant germline de novo mutation -->
		      {% set list_inheritance = dict_similar_disease['onto_term_ordo_inheritance'].split(' | ') %}
		      {% for inheritance in list_inheritance %}
		        {% if inheritance == "HP:0000006" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0000006">{{ _('Autosomal_dominant_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0000007" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0000007">{{ _('Autosomal_recessive_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001417" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001417">{{ _('X-linked_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001419" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001419">{{ _('X-linked_recessive_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001423" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001423">{{ _('X-linked_dominant_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001425" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001425">{{ _('Heterogeneous') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001426" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001426">{{ _('Multifactorial_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001427" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001427">{{ _('Mitochondrial_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001428" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001428">{{ _('Somatic_mutation') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001442" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001442">{{ _('Somatic_mosaicism') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001444" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001444">{{ _('Autosomal_dominant_somatic_cell_mutation') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001450" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001450">{{ _('Y-linked_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001452" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001452">{{ _('Autosomal_dominant_contiguous_gene_syndrome') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001466" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001466">{{ _('Contiguous_gene_syndrome') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001470" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001470">{{ _('Sex-limited_autosomal_dominant') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001472" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001472">{{ _('Familial_predisposition') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001475" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001475">{{ _('Male-limited_autosomal_dominant') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0003743" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0003743">{{ _('Genetic_anticipation') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0003744" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0003744">{{ _('Genetic_anticipation_with_paternal_anticipation_bias') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0003745" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0003745">{{ _('Sporadic') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0010982" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0010982">{{ _('Polygenic_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0010984" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0010984">{{ _('Digenic_inheritanec') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0012275" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0012275">{{ _('Autosomal_dominant_inheritance_with_maternal_imprinting') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0025352" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0025352">{{ _('Autosomal_dominant_germline_de_novo_mutation') }}</a></font></span>
			{% endif %}
		      {% endfor %}
		      </p>

		      <!-- Disease Definition -->
                      <p style="margin-bottom:0.6em;"><font color="black">{{ dict_similar_disease['onto_term_ordo_disease_definition'] | safe }}</font>
		        {% if (get_locale() == "ja" or get_locale() == "ja_JP") and dict_similar_disease['onto_term_ordo_disease_definition'] != "" %}
			  <a href="https://translate.google.co.jp/?hl=ja#en/ja/{{ dict_similar_disease['onto_term_ordo_disease_definition'] | replace('/', '%2F') }}" target="_blank"><font color="#0431B4">&nbsp;&gt;&gt;&nbsp;{{ _('search_label_translate_google') }}</font></a>
		        {% endif %}
		      </p>

		      <!-- External Resources -->
		      <!-- p style="margin-bottom:0.1em;line-height:1.8em;" -->
		      <!-- link of Orphanet -->
		      <a href="http://www.orpha.net/consor/cgi-bin/OC_Exp.php?Expert={{ dict_similar_disease['onto_id_ordo'] | replace('ORDO:', '') }}" target="_blank"><u><font color="#0431B4">{{ dict_similar_disease['onto_id_ordo'] | replace('ORDO:', 'Orphanet:') }}</font></u></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		      <!-- link of Google -->
		      <a href="http://www.google.com/search?q={{ dict_similar_disease['onto_term_ordo'] }}&tbm=isch" target="_blank"><u><font color="#0431B4">{{ _('search_label_search_image_google') }}</font></u></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		      <!-- link of Case Reports -->
		      <a href="{{ url_for_disease_casereport_page(dict_similar_disease['onto_id_ordo'], str_phenotypes, '', '1', '10') }}" target="_blank"><u><font color="#0431B4">{{ _('search_label_related_casereport') }}</font></u></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		      <!-- link of UR-DBMS -->
		      <!--
		      {% if get_locale() == "ja" or get_locale() == "ja_JP" %}
		        {% for dict_reference_source in dict_similar_disease['reference_source'] %}
			  {% if dict_reference_source['source'] == "UR-DBMS" %}
		            <a href="{{ dict_reference_source['link'] }}" target="_blank"><u><font color="#0431B4">琉球大学遺伝性疾患データベース</font></u></a><br>
			  {% endif %}
	                {% endfor %}
		      {% endif %}
		      -->
		      <!-- link of Gene Reviews -->
		      {% for dict_reference_source in dict_similar_disease['reference_source'] %}
		        {% if dict_reference_source['source'] == "GeneReviews" %}
		          <a href="{{ dict_reference_source['link'] }}" target="_blank"><u><font color="#0431B4">Gene Reviews</font></u></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			{% endif %}
	              {% endfor %}
		      <!-- link of GTR -->
		      {% for dict_reference_source in dict_similar_disease['reference_source'] %}
			{% if dict_reference_source['source'] == "UMLS" %}
		          <a href="https://www.ncbi.nlm.nih.gov/gtr/all/tests/?term={{ dict_reference_source['reference'] }}" target="_blank"><u><font color="#0431B4">GTR:{{ dict_reference_source['reference'] }}</font></u></a>
			{% endif %}
	              {% endfor %}
                      <!--/p-->
                      </p>
		    </td>
		  </tr>
		{% endfor %}
	      </tbody>
	    </table>
	  </div><!--/.col-sm-12-->
	</div><!--/row-->
        <!-- END: Show result table -->

	<!-- START: Pagination lower_part -->
	<table width="100%" height="120">
	  <tr>
	    <td align="middle" valign="middle">
	      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	      <ul class="pagination">
		{% if pagination.has_prev %}
		  <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, (pagination.page - 1) ~ ',' ~ pagination_omim.page, cs ~ ',' ~ cs_omim ~ ',' ~ 'orphanet') }}">&laquo;</a></li>
		{% endif %}
		{%- for page in pagination.iter_pages() %}
		  {% if page %}
		    {% if page != pagination.page %}
		      <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, page ~ ',' ~ pagination_omim.page, cs ~ ',' ~ cs_omim ~ ',' ~ 'orphanet') }}">{{ page }}</a></li>
		    {% else %}
		      <li align="center" class="active"><a href="#">{{ page }}</a></li>
		    {% endif %}
		  {% else %}
		    <li align="center"><span style="border : 0px">…</span></l>
                  {% endif %}
		{%- endfor %}
                {% if pagination.has_next %}
                  <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, (pagination.page + 1) ~ ',' ~ pagination_omim.page, cs ~ ',' ~ cs_omim ~ ',' ~ 'orphanet') }}">&raquo;</a></li>
	        {% endif %}
              </ul>
            </td>
          </tr>
        </table>
        <!-- END: Pagination lower_part -->
	</div>


        <!-- Start: OMIM tab -->
	{% if active_tab == "omim" %}
        <div class="tab-pane fade in active" id="tab2default">
	{% else %}
        <div class="tab-pane fade" id="tab2default">
	{% endif %}


	<div clas="row">
	  <div class="col-sm-12">


	  <table width="100%" height="60">
	    <tr>
	      <!-- START: Show total number -->
	      <td align="left" valign="top" width="230">
		<p><br></p>
		<p>{{ _('search_label_total') }}: <font size="4" color="black"><b>{{ total_hit_omim }}</b></font> {{ _('search_label_disease') }}</p>
	      </td>
	      <!-- END: Show total number -->

	      <!-- START: Pagination upper_part -->
	      <td align="middle" valign="middle">
		<ul class="pagination">
		  {% if pagination_omim.has_prev %}
		    <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',' ~ (pagination_omim.page - 1), cs ~ ',' ~ cs_omim ~ ',' ~ 'omim') }}">&laquo;</a></li>
		  {% endif %}
		  {%- for page in pagination_omim.iter_pages() %}
		    {% if page %}
		      {% if page != pagination_omim.page %}
		        <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',' ~ page, cs ~ ',' ~ cs_omim ~ ',' ~ 'omim') }}">{{ page }}</a></li>
		      {% else %}
		        <li align="center" class="active"><a href="#">{{ page }}</a></li>
		      {% endif %}
		    {% else %}
		      <li align="center"><span style="border : 0px">…</span></l>
                    {% endif %}
		  {%- endfor %}
                  {% if pagination_omim.has_next %}
                    <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',' ~ (pagination_omim.page + 1), cs ~ ',' ~ cs_omim ~ ',' ~ 'omim') }}">&raquo;</a></li>
		  {% endif %}
                </ul>
	      </td>
              <!-- END: Pagination upper_part -->
	      <!-- START: Show selector for "per page" -->
	      <input type="hidden" name="page_omim" value="{{ pagination_omim.page }}">
	      <input type="hidden" name="changesize_selector_omim" value="{{ cs_omim }}">
              <td align="right" valign="top" width="200">
		<p><br></p>
		<!-- http://qiita.com/act823/items/3a203f1f96e7fe52f69d -->
		<select id="changesize_selector_omim_link" name="changesize_selector_omim_link" onchange="changesize_omim()">
		  {% if cs_omim == "10" %}
		    <option id="selector_10" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',10,omim') }}" selected>10</option>
		    <option id="selector_20" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',20,omim') }}">20</option>
		    <option id="selector_40" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',40,omim') }}">40</option>
		    <option id="selector_60" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',60,omim') }}">60</option>
		    <option id="selector_100" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',100,omim') }}">100</option>
		  {% endif %}
		  {% if cs_omim == "20" %}
		    <option id="selector_10" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',10,omim') }}">10</option>
		    <option id="selector_20" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',20,omim') }}" selected>20</option>
		    <option id="selector_40" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',40,omim') }}">40</option>
		    <option id="selector_60" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',60,omim') }}">60</option>
		    <option id="selector_100" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',100,omim') }}">100</option>
		  {% endif %}
		  {% if cs_omim == "40" %}
		    <option id="selector_10" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',10,omim') }}">10</option>
		    <option id="selector_20" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',20,omim') }}">20</option>
		    <option id="selector_40" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',40,omim') }}" selected>40</option>
		    <option id="selector_60" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',60,omim') }}">60</option>
		    <option id="selector_100" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',100,omim') }}">100</option>
		  {% endif %}
		  {% if cs_omim == "60" %}
		    <option id="selector_10" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',10,omim') }}">10</option>
		    <option id="selector_20" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',20,omim') }}">20</option>
		    <option id="selector_40" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',40,omim') }}">40</option>
		    <option id="selector_60" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',60,omim') }}" selected>60</option>
		    <option id="selector_100" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',100,omim') }}">100</option>
		  {% endif %}
		  {% if cs_omim == "100" %}
		    <option id="selector_10" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',10,omim') }}">10</option>
		    <option id="selector_20" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',20,omim') }}">20</option>
		    <option id="selector_40" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',40,omim') }}">40</option>
		    <option id="selector_60" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',60,omim') }}">60</option>
		    <option id="selector_100" value="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',1', cs ~ ',100,omim') }}" selected>100</option>
		  {% endif %}
		</select>
		{{ _('search_label_perpage') }}
	      </td>
	      <!-- END: Show selector for "per page" -->
            </tr>
          </table>
	</form>
        <!-- END: FORM -->

        <!-- START: Download button -->
	<!--
        <div align="right">
	  <input type="button" class="btn btn-info" value="{{ _('search_button_download') }}" onClick='location.href="{{ url_for_download_results_search_omim_page(str_phenotypes, str_genes, '1', '10') }}"'>
        </div>
	-->
        <!-- END: Download button -->

        <!-- START: Show result table -->
	<br>
	<table class="table table-striped">
	      <thead>
		<tr>
		  <th style="width:100px;" class="text-left">{{ _('search_label_rank') }}<br>{{ _('search_label_similarity') }}</th>
		  <th style="width:200px;" class="text-left">{{ _('search_label_DiseaseName') }}</th>
		  <th>
		    <div align="right">
		      <span class="label label-primary"><font size="3"><b>{{ _('search_label_MatchedPhenotype') }}</b></font></span>&nbsp;
		      <span class="label label-default"><font size="3"><b>{{ _('search_label_CausativeGene') }}</b></font></span>&nbsp;
		      <span class="label label-success"><font size="3"><b>{{ _('search_label_Inheritance') }}</b></font></span><br>
		    </div>
		  </th>
		</tr>
	      </thead>
	      <tbody>
		<!-- http://tnakamura.hatenablog.com/entry/20110608/jinja2_for_loop_index -->
                {% for dict_similar_disease_omim in list_dict_similar_disease_omim %}
		  <tr>
		    <!-- Rank -->
		    <!-- Similarity -->
		    <td width="10">
		      <p style="margin-top:0.6em;margin-bottom:0.6em;">
			{{ dict_similar_disease_omim['rank'] }}<br>({{ (dict_similar_disease_omim['match_score']*100)|round(1) }}%)
		      </p>
		    </td>
		    <!-- Disease Name -->
		    <td>
		      <p style="margin-top:0.6em;margin-bottom:0.6em;">
			<!--a href="{{ url_for_disease_casereport_page(dict_similar_disease_omim['onto_id_omim'], str_phenotypes, '', '1', '10') }}" target="_blank">{{ dict_similar_disease_omim['onto_term_omim'] }}<br>({{dict_similar_disease_omim['onto_id_omim']}})</a-->
			<a href="https://www.omim.org/entry/{{ dict_similar_disease_omim['onto_id_omim'] | replace('OMIM:', '') }}" target="_blank">{{ dict_similar_disease_omim['onto_term_omim'] }}
		          {% if (get_locale() == "ja" or get_locale() == "ja_JP") and dict_similar_disease_omim['onto_term_omim_ja'] != "" %}
			    <br>----<br>{{ dict_similar_disease_omim['onto_term_omim_ja'] }}
		          {% endif %}
			</p>
		      </a>
		    </td>
		    <td>
		    <!-- Matched Phenotypes -->
		      <p style="margin-top:0.6em;margin-bottom:0.6em;">
		      <p style="margin-bottom:0.6em;">
		      {% set dict_prev_id = {} %}
		      {% for dict_onto_id_term_hp_disease in dict_similar_disease_omim['onto_id_term_hp_disease'] %}
		        {% if not dict_onto_id_term_hp_disease['onto_id_hp_disease'] in dict_prev_id %}
		          <span class="label label-primary"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/{{ dict_onto_id_term_hp_disease['onto_id_hp_disease'] }}">{{ dict_onto_id_term_hp_disease['onto_term_hp_disease'] }}</a></font></span>
			  {%- if dict_prev_id.update({dict_onto_id_term_hp_disease['onto_id_hp_disease']:True}) %}{%- endif %}
		        {% endif %}
                      {% endfor %}
                      </p>
		    <!-- Causative Genes -->
		      {% set prev_id = "" %}
		      {% for dict_omim_symbol_synonym in dict_similar_disease_omim['omim_symbol_synonym'] %}
		        {% if prev_id != dict_omim_symbol_synonym['entrez_id'] %}
		          <span class="btn-group">
			    <button class="label label-default" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			      <font size="3" color="white">{{ dict_omim_symbol_synonym['symbol'] }}</font>
			    </button>
			    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
			      <a class="dropdown-item" href="https://www.ncbi.nlm.nih.gov/CBBresearch/Lu/Demo/PubTator/index.cgi?searchtype=Gene&Sort=&query={{ dict_omim_symbol_synonym['symbol'] }}&Disease_display=1&Species_display=1&Mutation_display=1&Chemical_display=1&Gene_display=1" target="_blank"><font size="3" color="#0431B4"><u>PubTator</u></font></a><br>
			      <a class="dropdown-item" href="https://www.ncbi.nlm.nih.gov/clinvar/?term={{ dict_omim_symbol_synonym['symbol'] }}%5Bgene%5D" target="_blank"><font size="3" color="#0431B4"><u>ClinVar</u></font></a><br>
			      <a class="dropdown-item" href="http://www.hgmd.cf.ac.uk/ac/gene.php?gene={{ dict_omim_symbol_synonym['symbol'] }}" target="_blank"><font size="3" color="#0431B4"><u>HGMD</u></font></a>
			    </div>
		          </span>
		          <!--a href="https://www.ncbi.nlm.nih.gov/clinvar/?term={{ dict_omim_symbol_synonym['symbol'] }}%5Bgene%5D" target="_blank"><span class="label label-default"><font size="3">{{ dict_omim_symbol_synonym['symbol'] }}</font></span></a-->
		          {% set prev_id = dict_omim_symbol_synonym['entrez_id'] %}
			{% endif %}
		      {% endfor %}
		  <!-- Disease Information -->
		      <!-- Inheritance -->
		      <p style="margin-top:0.6em;margin-bottom:0.6em;">
			<!-- HP:0000006|Autosomal dominant inheritance -->
			<!-- HP:0000007|Autosomal recessive inheritance -->
			<!-- HP:0001417|X-linked inheritance -->
			<!-- HP:0001419|X-linked recessive inheritance -->
			<!-- HP:0001423|X-linked dominant inheritance -->
			<!-- HP:0001425|Heterogeneous -->
			<!-- HP:0001426|Multifactorial inheritance -->
			<!-- HP:0001427|Mitochondrial inheritance -->
			<!-- HP:0001428|Somatic mutation -->
			<!-- HP:0001442|Somatic mosaicism -->
			<!-- HP:0001444|Autosomal dominant somatic cell mutation -->
			<!-- HP:0001450|Y-linked inheritance -->
			<!-- HP:0001452|Autosomal dominant contiguous gene syndrome -->
			<!-- HP:0001466|Contiguous gene syndrome -->
			<!-- HP:0001470|Sex-limited autosomal dominant -->
			<!-- HP:0001472|Familial predisposition -->
			<!-- HP:0001475|Male-limited autosomal dominant -->
			<!-- HP:0003743|Genetic anticipation -->
			<!-- HP:0003744|Genetic anticipation with paternal anticipation bias -->
			<!-- HP:0003745|Sporadic -->
			<!-- HP:0010982|Polygenic inheritance -->
			<!-- HP:0010984|Digenic inheritanec -->
			<!-- HP:0012275|Autosomal dominant inheritance with maternal imprinting -->
			<!-- HP:0025352|Autosomal dominant germline de novo mutation -->
		      {% set list_inheritance = dict_similar_disease_omim['onto_term_omim_inheritance'].split(' | ') %}
		      {% for inheritance in list_inheritance %}
		        {% if inheritance == "HP:0000006" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0000006">{{ _('Autosomal_dominant_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0000007" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0000007">{{ _('Autosomal_recessive_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001417" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001417">{{ _('X-linked_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001419" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001419">{{ _('X-linked_recessive_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001423" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001423">{{ _('X-linked_dominant_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001425" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001425">{{ _('Heterogeneous') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001426" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001426">{{ _('Multifactorial_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001427" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001427">{{ _('Mitochondrial_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001428" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001428">{{ _('Somatic_mutation') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001442" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001442">{{ _('Somatic_mosaicism') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001444" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001444">{{ _('Autosomal_dominant_somatic_cell_mutation') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001450" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001450">{{ _('Y-linked_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001452" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001452">{{ _('Autosomal_dominant_contiguous_gene_syndrome') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001466" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001466">{{ _('Contiguous_gene_syndrome') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001470" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001470">{{ _('Sex-limited_autosomal_dominant') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001472" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001472">{{ _('Familial_predisposition') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0001475" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0001475">{{ _('Male-limited_autosomal_dominant') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0003743" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0003743">{{ _('Genetic_anticipation') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0003744" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0003744">{{ _('Genetic_anticipation_with_paternal_anticipation_bias') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0003745" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0003745">{{ _('Sporadic') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0010982" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0010982">{{ _('Polygenic_inheritance') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0010984" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0010984">{{ _('Digenic_inheritanec') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0012275" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0012275">{{ _('Autosomal_dominant_inheritance_with_maternal_imprinting') }}</a></font></span>
			{% endif %}
		        {% if inheritance == "HP:0025352" %}
			  <span class="label label-success"><font size="3"><a target="_blank" style="color:white;" href="https://hpo.jax.org/app/browse/term/HP:0025352">{{ _('Autosomal_dominant_germline_de_novo_mutation') }}</a></font></span>
			{% endif %}
		      {% endfor %}
		      </p>
		      <!-- Disease Definition -->
                      <p style="margin-bottom:0.6em;"><font color="black">{{ dict_similar_disease_omim['onto_term_omim_disease_definition'] | safe }}</font>
		        {% if (get_locale() == "ja" or get_locale() == "ja_JP") and dict_similar_disease_omim['onto_term_omim_disease_definition'] != "" %}
			  <a href="https://translate.google.co.jp/?hl=ja#en/ja/{{ dict_similar_disease_omim['onto_term_omim_disease_definition'] | replace('/', '%2F') }}" target="_blank"><font color="#0431B4">&nbsp;&gt;&gt;&nbsp;{{ _('search_label_translate_google') }}</font></a>
		        {% endif %}
		      </p>
		      <!-- External Resources -->
		      <!--p style="margin-bottom:0.1em;line-height:1.8em;"-->
		      <!-- links of OMIM and Googles -->
		      <a href="https://www.omim.org/entry/{{ dict_similar_disease_omim['onto_id_omim'] | replace('OMIM:', '') }}" target="_blank"><u><font color="#0431B4">{{dict_similar_disease_omim['onto_id_omim']}}</font></u></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		      <a href="http://www.google.com/search?q={{ dict_similar_disease_omim['onto_term_omim'] }}&tbm=isch" target="_blank"><u><font color="#0431B4">{{ _('search_label_search_image_google') }}</font></u></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		      <!-- link of UR-DBMS -->
		      <!--
		      {% if get_locale() == "ja" or get_locale() == "ja_JP" %}
		        {% for dict_reference_source in dict_similar_disease_omim['reference_source'] %}
			  {% if dict_reference_source['source'] == "UR-DBMS" %}
		            <a href="{{ dict_reference_source['link'] }}" target="_blank"><u><font color="#0431B4">琉球大学遺伝性疾患データベース</font></u></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			  {% endif %}
	                {% endfor %}
		      {% endif %}
		      -->
		      <!-- link of Gene Reviews -->
		      {% for dict_reference_source in dict_similar_disease_omim['reference_source'] %}
		        {% if dict_reference_source['source'] == "GeneReviews" %}
		          <a href="{{ dict_reference_source['link'] }}" target="_blank"><u><font color="#0431B4">Gene Reviews</font></u></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			{% endif %}
	              {% endfor %}
		      <!-- link of GTR -->


		      {% for dict_reference_source in dict_similar_disease_omim['reference_source'] %}
			{% if dict_reference_source['source'] == "UMLS" %}
		            <a href="https://www.ncbi.nlm.nih.gov/gtr/all/tests/?term={{ dict_reference_source['reference'] }}" target="_blank"><u><font color="#0431B4">GTR:{{ dict_reference_source['reference'] }}</font></u></a>
			{% endif %}
	              {% endfor %}

<!--
		      {% set flg_UMLS_ini = 0 %}
		      {% set flg_UMLS_num = 0 %}
		      {% for dict_reference_source in dict_similar_disease_omim['reference_source'] %}
			{% if dict_reference_source['source'] == "UMLS" %}
		          {% set flg_UMLS_num = flg_UMLS_num + 1 %}
		          {% if flg_UMLS_ini == 0 %}
		            {{ _('search_label_genetic_testing') }}( <a href="https://www.ncbi.nlm.nih.gov/gtr/all/tests/?term={{ dict_reference_source['reference'] }}" target="_blank"><u><font color="#0431B4">{{ dict_reference_source['reference'] }}</font></u></a>
		            {% set flg_UMLS_ini = 1 %}
		          {% else %}
		            ,&nbsp;<a href="https://www.ncbi.nlm.nih.gov/gtr/all/tests/?term={{ dict_reference_source['reference'] }}" target="_blank"><u><font color="#0431B4">{{ dict_reference_source['reference'] }}</font></u></a>
		          {% endif %}
			{% endif %}
			{% if loop.index == dict_similar_disease_omim['reference_source']|length and flg_UMLS_ini == 1 and flg_UMLS_num > 0 %}
		          )
			{% endif %}
	              {% endfor %}
-->
		      <!--a href="{{ url_for_disease_casereport_page(dict_similar_disease_omim['onto_id_omim'], str_phenotypes, '', '1', '10') }}" target="_blank"><u><font color="#0431B4">{{ _('search_label_related_casereport') }}</font></u></a-->
		      <!--/p-->
		      </p>
		    </td>
		  </tr>
		{% endfor %}
	      </tbody>
	    </table>
	  </div><!--/.col-sm-12-->
	</div><!--/row-->
        <!-- END: Show result table -->

	<!-- START: Pagination lower_part -->
	<table width="100%" height="120">
	  <tr>
	    <td align="middle" valign="middle">
	      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	      <ul class="pagination">
		{% if pagination_omim.has_prev %}
		  <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',' ~ (pagination_omim.page - 1), cs ~ ',' ~ cs_omim ~ ',' ~ 'omim') }}">&laquo;</a></li>
		{% endif %}
		{%- for page in pagination_omim.iter_pages() %}
		  {% if page %}
		    {% if page != pagination_omim.page %}
		      <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',' ~ page, cs ~ ',' ~ cs_omim ~ ',' ~ 'omim') }}">{{ page }}</a></li>
		    {% else %}
		      <li align="center" class="active"><a href="#">{{ page }}</a></li>
		    {% endif %}
		  {% else %}
		    <li align="center"><span style="border : 0px">…</span></l>
                  {% endif %}
		{%- endfor %}
                {% if pagination_omim.has_next %}
                  <li align="center"><a href="{{ url_for_search_page(str_phenotypes, str_genes, pagination.page ~ ',' ~ (pagination_omim.page + 1), cs ~ ',' ~ cs_omim ~ ',' ~ 'omim') }}">&raquo;</a></li>
	        {% endif %}
              </ul>
            </td>
          </tr>
        </table>
        <!-- END: Pagination lower_part -->



	</div>
	</div>
	</div>
	</div>



      </div>
    </div>
    <!-- END: main contents -->


    <!-- START: Import JavaScript -->	
    <!-- jQuery -->
    <script src="/static/js/jquery.min.js"></script>
    <!-- jQuery Easing -->
    <script src="/static/js/jquery.easing.1.3.js"></script>
    <!-- Bootstrap -->
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- Waypoints -->
    <script src="/static/js/jquery.waypoints.min.js"></script>
    <!-- countTo -->
    <script src="/static/js/jquery.countTo.js"></script>
    <!-- Magnific Popup -->
    <script src="/static/js/jquery.magnific-popup.min.js"></script>
    <script src="/static/js/magnific-popup-options.js"></script>
    <!-- Stellar -->
    <script src="/static/js/jquery.stellar.min.js"></script>
    <!-- Main -->
    <script src="/static/js/main.js"></script>
    <!-- END: Import JavaScript -->	


    <!-- START: jquery-tokeninput -->
    <script type="text/javascript" src="/static/js/jquery.tokeninput.js"></script>
    <script type="text/javascript" src="/static/js/jquery.tokeninput_gene.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $("#tokeninput_hpo").tokenInput("/tokeninput_hpo", {
          theme: "facebook",
          prePopulate: {{ json_phenotypes|safe }}
        });
        $("#tokeninput_genes").tokenInput_gene("/tokeninput_genes", {
          theme: "facebook",
          prePopulate: {{ json_genes|safe }}
        });
        $("#tokeninput_hpo_genes_clear").click(function (){
          $("#tokeninput_hpo").tokenInput("clear");
          $("#tokeninput_genes").tokenInput("clear");
          document.getElementById("filename_hpo_list").value="";
          document.getElementById("filename_gene_list").value="";
          return false;
        });
      });
      $("#phenotouch").click(function (e){
        $.PopupRelationHPOWithWebGL();
        e.preventDefault();
        e.stopPropagation();
        return false;
      });
    </script>
    <!-- END: jquery-tokeninput -->

    <!-- START: popup-hierarchy-hpo -->
    <!-- WebGL -->
    <script src="/static/js/d3/3.5.17/d3.min.js"></script>
    <script src="/static/js/three.js-r84/build/three.min.js"></script>
    <script src="/static/js/three.js-r84/examples/js/Detector.js"></script>
    <script src="/static/js/three-bits/OBJLoader.js"></script>
    <script src="/static/js/three-bits/three-bits.js"></script>
    <script src="/static/js/three-bits/three-bits-renderer.js"></script>
    <script src="/static/js/three-bits/defaults.js"></script>
    <script src="/static/js/three-bits/category2obj.js"></script>
    <script src="/static/js/popup-hierarchy-hpo.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $("#tokeninput_hpo").popupRelationHPO('/popup_hierarchy_hpo');
      });
    </script>
    <!-- END: popup-hierarchy-hpo -->
    
    <!-- START: javascript changesize -->
    <script type="text/javascript">
      function changesize_orphanet() {
      var browser = document.search.changesize_selector_orphanet_link.value;
        location.href = browser
      }
      function changesize_omim() {
      var browser = document.search.changesize_selector_omim_link.value;
        location.href = browser
      }
    </script>
    <!-- END: javascript changesize -->

    <!-- START: javascript changesize -->
    <script type="text/javascript">
    $(function(){
        //ボタンクリックで発火
        $(document).on('click', '#btn-phenotips', function(){
            alert( "Hello" );
            //Ajaxでform入力内容送信
            $.ajax( {
                type: "POST",
                url: "https://demo.gene42.com/rest/patients",
                dataType: "json",
                data : {{ json_phenotips }},
                timeout:10000,
                username: '',
                password: '',
                //beforeSend: function(xhr) {
                //    alert('before');
                //    xhr.setRequestHeader ("Authorization", "Basic " + btoa($('#phenotips_username').val() + ":" + $('#phenotips_password').val()));
                //},
            // success
            }).done(function( response ){
                alert( "success" );
            // fail
            }).fail(function( data ){
                alert( "fail" );
            });
        });
    })
    </script>
    <!-- END: javascript changesize -->

    <!-- START: Copy link -->
    <script>
        function copyToClipboard() {
            // コピー対象をJavaScript上で変数として定義する
            var copyTarget = document.getElementById("share_link");
            // コピー対象のテキストを選択する
            copyTarget.select();
            // 選択しているテキストをクリップボードにコピーする
            document.execCommand("Copy");
        }
    </script>
    <!-- END: Copy link -->



{% endblock %}

